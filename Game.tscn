[gd_scene load_steps=7 format=2]

[ext_resource path="res://placeholders.png" type="Texture" id=1]
[ext_resource path="res://Scenes/drone.tscn" type="PackedScene" id=2]
[ext_resource path="res://Scenes/silo.tscn" type="PackedScene" id=3]
[ext_resource path="res://Scenes/launcher.tscn" type="PackedScene" id=4]

[sub_resource type="GDScript" id=2]
script/source = "extends CanvasLayer

# Called when the node enters the scene tree for the first time.
func _ready():
	GameManager.start_game()
"

[sub_resource type="GDScript" id=1]
script/source = "extends Node2D

export var lane_count = 5 setget set_lane
var tile_count = 7

var tile_scene = preload(\"res://Scenes/tile.tscn\")
const tile_size = 128
var tile_scale = 0.6

var tile_offset = 5

# Called when the node enters the scene tree for the first time.
func _ready():
	_generate()

func _generate():
	
	for child in get_children():
		child.free()
	
	for l in range(0,lane_count):
		for t in range(0,tile_count):
			var tile:Node2D = tile_scene.instance()
			tile.scale = Vector2(tile_scale, tile_scale)
			tile.position.y = l * tile_size * tile_scale - l*tile_offset
			tile.position.x = t * tile_size * tile_scale
			add_child(tile)

func set_lane(count):
	lane_count = count
	print('update')
	_generate()
"

[node name="Node2D" type="CanvasLayer"]
script = SubResource( 2 )

[node name="Sky" type="Sprite" parent="."]
position = Vector2( 512.743, 178.44 )
scale = Vector2( 13.8293, 6.13706 )
texture = ExtResource( 1 )
region_enabled = true
region_rect = Rect2( 159.621, 176.754, 74.2066, 58.4332 )
__meta__ = {
"_edit_lock_": true
}

[node name="Ground" type="Sprite" parent="."]
position = Vector2( 512.743, 395.317 )
scale = Vector2( 14.2134, 7.22851 )
texture = ExtResource( 1 )
region_enabled = true
region_rect = Rect2( 159.629, 95.023, 72.7726, 57.7162 )
__meta__ = {
"_edit_lock_": true
}

[node name="Field" type="Node2D" parent="."]
position = Vector2( 325.122, 255.039 )
script = SubResource( 1 )

[node name="Drone" parent="." instance=ExtResource( 2 )]
position = Vector2( 310.499, 514.317 )
scale = Vector2( 1.2, 1.2 )

[node name="Silo" parent="." instance=ExtResource( 3 )]

[node name="Launcher" parent="." instance=ExtResource( 4 )]
position = Vector2( 915.572, 596.096 )
