[gd_scene load_steps=12 format=2]

[ext_resource path="res://placeholders.png" type="Texture" id=1]
[ext_resource path="res://Scenes/drone.tscn" type="PackedScene" id=2]
[ext_resource path="res://Scenes/silo.tscn" type="PackedScene" id=3]
[ext_resource path="res://Sprite/Rocket/launcher_hinge.png" type="Texture" id=4]
[ext_resource path="res://Sprite/Rocket/launcher_lid.png" type="Texture" id=5]
[ext_resource path="res://Sprite/Rocket/launcher_base.png" type="Texture" id=6]
[ext_resource path="res://Sprite/Rocket/launcher_button.png" type="Texture" id=7]
[ext_resource path="res://Sprite/Rocket/rocket.png" type="Texture" id=8]
[ext_resource path="res://Sprite/Rocket/rocket_trail.png" type="Texture" id=9]

[sub_resource type="GDScript" id=2]
script/source = "extends CanvasLayer

# Called when the node enters the scene tree for the first time.
func _ready():
	GameManager.start_game()
"

[sub_resource type="GDScript" id=1]
script/source = "extends Node2D

export var lane_count = 5 setget set_lane
var tile_count = 7

var tile_scene = preload(\"res://Scenes/tile.tscn\")
const tile_size = 128
var tile_scale = 0.6

var tile_offset = 5

# Called when the node enters the scene tree for the first time.
func _ready():
	_generate()

func _generate():
	
	for child in get_children():
		child.free()
	
	for l in range(0,lane_count):
		for t in range(0,tile_count):
			var tile:Node2D = tile_scene.instance()
			tile.scale = Vector2(tile_scale, tile_scale)
			tile.position.y = l * tile_size * tile_scale - l*tile_offset
			tile.position.x = t * tile_size * tile_scale
			add_child(tile)

func set_lane(count):
	lane_count = count
	print('update')
	_generate()
"

[node name="Node2D" type="CanvasLayer"]
script = SubResource( 2 )

[node name="Sky" type="Sprite" parent="."]
position = Vector2( 512.743, 178.44 )
scale = Vector2( 13.8293, 6.13706 )
texture = ExtResource( 1 )
region_enabled = true
region_rect = Rect2( 159.621, 176.754, 74.2066, 58.4332 )
__meta__ = {
"_edit_lock_": true
}

[node name="Ground" type="Sprite" parent="."]
position = Vector2( 512.743, 395.317 )
scale = Vector2( 14.2134, 7.22851 )
texture = ExtResource( 1 )
region_enabled = true
region_rect = Rect2( 159.629, 95.023, 72.7726, 57.7162 )
__meta__ = {
"_edit_lock_": true
}

[node name="Field" type="Node2D" parent="."]
position = Vector2( 325.122, 255.039 )
script = SubResource( 1 )

[node name="Drone" parent="." instance=ExtResource( 2 )]
position = Vector2( 310.499, 514.317 )
scale = Vector2( 1.2, 1.2 )

[node name="Silo" parent="." instance=ExtResource( 3 )]

[node name="Launcher" type="Node2D" parent="."]
position = Vector2( 935.061, 598.67 )
scale = Vector2( 0.410976, 0.410976 )

[node name="launcher_lid" type="Sprite" parent="Launcher"]
position = Vector2( 118.765, -10.5178 )
rotation = -0.0101234
texture = ExtResource( 5 )
offset = Vector2( -115.664, -51.0578 )

[node name="launcher_button" type="Sprite" parent="Launcher/launcher_lid"]
modulate = Color( 1, 0, 0, 1 )
show_behind_parent = true
position = Vector2( -122.839, -101.222 )
texture = ExtResource( 7 )

[node name="launcher_base" type="Sprite" parent="Launcher"]
texture = ExtResource( 6 )

[node name="launcher_hinge" type="Sprite" parent="Launcher"]
position = Vector2( 125.442, -13.5878 )
texture = ExtResource( 4 )

[node name="rocket" type="Sprite" parent="Launcher"]
position = Vector2( -24.3945, -751.102 )
texture = ExtResource( 8 )

[node name="rocket_trail" type="Sprite" parent="Launcher/rocket"]
show_behind_parent = true
position = Vector2( 6.24561, 337.253 )
texture = ExtResource( 9 )
